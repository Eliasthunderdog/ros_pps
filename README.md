# ros_pps

尝试用概率编程方法替代现有的ROS包中一些使用贝叶斯推断的部分，尝试寻找其中公共的pattern进行代码复用，构建贝叶斯推断系统的高层抽象。

### 机器人系统中需要面临的概率问题

机器人在完成任务的过程中需要处理概率问题，这些问题本质上是由传感器和系统本身的误差造成的，其中比较突出的问题有两个：


- 一个量的误差可能会随着另一个量而增大，比如让机器人向前走1步距离的误差，和向前走10步距离的误差。这些需要通过一些其他的传感器进行修正。
- 需要计算的未知变量相互依赖，对一个未知量的估计会影响另一个量的估计。比如SLAM问题，对地图（周围环境信息，比如离一个障碍物有多远）会影响到对自身位置的估计。可以把它想成两个随机变量的联合分布。

目前ROS中已经存在比较成熟的工具可以进行相关的推理工作，使用的基础算法可以在[Probabilistic Robotics](http://www.probabilistic-robotics.org/)一书中找到。

### 目前ROS存在的缺陷

**ROS工具包中一些公共的代码或者功能部分难以复用，一些功能的实现过于底层**。在TurtleBot3实验平台上做的模拟实验，slam, navigation等功能都是调用现成的工具包实现的，这些工具包中包含不同的node完成各自的功能，比如navigation中包含用于定位的amcl和其他关于路径规划的包。如果实验过程中需要开发新的功能，其中的概率推断部分就可以进行复用，因为我们可以将贝叶斯推断或者其他的概率模型用某种方式抽象出来，比如适用性比较强的函数或者类封装，这些公共的pattern就可以直接调用，方便开发和测试。这也是已有的概率编程系统期望达到的目标。此次主要针对amcl包(Adaptive Monto Carlo Localization)进行探索和替换。

### 计划

1. ~~amcl包使用的算法，关键代码~~
2. amcl与其他节点通信的方式，通信的数据内容
3. 在概率编程语言中实现该计算和通信
4. 设计通用性比较强的接口和编程模式